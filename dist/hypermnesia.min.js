!function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){window.Hypermnesia=function(itemFetcherFunc,passedOptions){if(void 0==itemFetcherFunc||null==itemFetcherFunc)throw new Error("You must provide a function that will be called every         time a key wasn't found in my internal cache.");var itemFetcher=itemFetcherFunc,defaults={limit:0,expiration:0},options={};for(var key in defaults)void 0!=passedOptions&&passedOptions.hasOwnProperty(key)?options[key]=passedOptions[key]:defaults.hasOwnProperty(key)&&(options[key]=defaults[key]);var JSplay=require("JSplay"),cache=new JSplay,CachedItem=function(key,value){var key=key,value=value,createAt=(new Date).getTime();this.getKey=function(){return key},this.getValue=function(){return value},this.getCreateDate=function(){return createAt}},getFromCache=function(key){var item=cache.get(key);return null!=item?autoRefresh(item):null},fetchAndCacheItem=function(key){var item=itemFetcher(key);return null!=item?storeCachedItem(key,item):null},hasFreeSpace=function(){return 0==options.limit||cache.getSize()<1||cache.getSize()<options.limit},storeCachedItem=function(key,item){hasFreeSpace()||freeSpace();var cachedItem=new CachedItem(key,item);return cache.add(cachedItem.getKey(),cachedItem),cachedItem},freeSpace=function(){for(;!hasFreeSpace();){if(cache.splayDeepest(),null==cache.root)return;cache.remove(cache.root.key)}},calculateItemAge=function(item){if(null!=item){var now=(new Date).getTime(),itemCreation=item.getCreateDate();return now-itemCreation}return 0},autoRefresh=function(item){if(needsRefresh(item)){var itemValue=itemFetcher(item.getKey());item=new CachedItem(key,itemValue),cache.add(item.getKey(),item)}return item},needsRefresh=function(item){return null!=item&&options.expiration>0&&calculateItemAge(item)>=options.expiration};this.get=function(key){var cachedItem=getFromCache(key)||fetchAndCacheItem(key);return null!=cachedItem?cachedItem.getValue():null},this.remove=function(key){cache.remove(key)},this.removeAll=function(){cache=new JSplay},this.refresh=function(key){var item=cache.remove(key);return null!=item?this.get(key):null},this.getTotal=function(){return cache.getSize()},this.add=function(key,item){var cacheItem=new CachedItem(key,item);cache.add(key,cacheItem)}}},{JSplay:2}],2:[function(require,module,exports){module.exports=function(){this.root=null;var NodeDefinition=function(key,value){this.key=key,this.value=value,this.left=null,this.right=null},DeepestNode=function(){var deepestLevel=0,deepestNode=null,caculate=function(node,level){null!=node&&(caculate(node.left,++level),level>deepestLevel&&(deepestNode=node,deepestLevel=level),caculate(node.right,++level))};this.find=function(node){return caculate(node,0),deepestNode}};this.contains=function(key){return null!=this.getNode(key)},this.get=function(key){var node=this.getNode(key);return null!=node?node.value:null},this.getNode=function(key){var node=this.splay(this.root,key);return null!=node&&(this.root=node,this.root.key===key)?this.root:null},this.add=function(key,value){if(null==this.root)return void(this.root=new NodeDefinition(key,value));if(this.root=this.splay(this.root,key),key<this.root.key){var node=new NodeDefinition(key,value);node.left=this.root.left,node.right=this.root,this.root.left=null,this.root=node}else if(key>this.root.key){var node=new NodeDefinition(key,value);node.right=this.root.right,node.left=this.root,this.root.right=null,this.root=node}else this.root.value=value},this.remove=function(key){if(null!=this.root&&this.root.key===key)if(null==this.root.left)this.root=this.root.right;else{var node=this.root.right;this.root=this.root.left,this.splay(this.root,key),this.root.right=node}},this.splay=function(node,key){if(null==node)return null;if(key<node.key){if(null==node.left)return node;key<node.left.key?(node.left.left=this.splay(node.left.left,key),node=this.rotateRight(node)):key>node.left.key&&(node.left.right=this.splay(node.left.right,key),null!=node.left.right&&(node.left=this.rotateLeft(node.left))),null!=node.left&&(node=this.rotateRight(node))}else if(key>node.key){if(null==node.right)return node;key<node.right.key?(node.right.left=this.splay(node.right.left,key),null!=node.right.left&&(node.right=this.rotateRight(node.right))):key>node.right.key&&(node.right.right=this.splay(node.right.right,key),node=this.rotateLeft(node)),null!=node.right&&(node=this.rotateLeft(node))}return node},this.splayDeepest=function(node){var deepestNodeFinder=new DeepestNode,node=deepestNodeFinder.find(this.root);null!=node&&this.get(node.key)},this.getSize=function(){return this.getSubTreeSize(this.root)},this.getSubTreeSize=function(node){return null==node?0:1+this.getSubTreeSize(node.left)+this.getSubTreeSize(node.right)},this.rotateLeft=function(node){if(null==node||null==node.right)return node;var right=node.right;return node.right=right.left,right.left=node,right},this.rotateRight=function(node){if(null==node||null==node.left)return node;var left=node.left;return node.left=left.right,left.right=node,left}}},{}]},{},[1]);
